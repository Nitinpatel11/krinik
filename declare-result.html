<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Declare Result</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
  <meta content="Themesdesign" name="author" />
  <!-- App favicon -->
  <!-- <link rel="shortcut icon" href="./assets/images/favicon.ico" /> -->
  <link rel="icon" href="./assets/images/krinikIn_Logo.svg" type="image/x-icon">

  <!-- DataTables -->
  <link href="./assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
  <link href="./assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"
    type="text/css" />

  <!-- Responsive datatable examples -->
  <link href="./assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet"
    type="text/css" />

  <!-- datepicker -->
  <link href="./assets/libs/air-datepicker/air-datepicker.css" rel="stylesheet" type="text/css" />

  <!-- jvectormap -->
  <!-- <link href="./assets/libs/jqvmap/jqvmap.min.css" rel="stylesheet" /> -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,300,0,0" />

  <!-- Bootstrap Css -->
  <link href="./assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <!-- Icons Css -->
  <link href="./assets/css/icons.min.css" rel="stylesheet" type="text/css" />
  <!-- App Css-->
  <link href="./assets/css/app.css" rel="stylesheet" type="text/css" />
</head>
<style>
  td {
    vertical-align: middle;
  }

  .responsive-td input {
    margin-top: 10px;
    width: 45%;
  }

  @media (max-width: 600px) {
    .responsive-td {
      width: 100%;
      flex-direction: column;
      align-items: stretch;
    }

    .responsive-td input {
      width: 100%;
    }
  }
</style>

<body data-topbar="colored">
  <!-- Begin page -->
  <div id="layout-wrapper">
    <header id="page-topbar" class="">
      <div class="navbar-header ">
        <div class="d-flex ">
          <!-- LOGO -->
          <div class="navbar-brand-box">
            <a href="./dashboard.html" class="logo logo-dark">
              <span class="logo-sm">
                
                <img src="./assets/images/krinikIn_Logo.svg" alt="" />
              </span>
              <span class="logo-lg">
              
                <img src="./assets/images/krinikIn_Logo.svg" alt=""  />
              </span>
            </a>

            <a href="index.html" class="logo logo-light ">
              <span class="logo-sm">
             
                <img src="./assets/images/krinikIn_Logo.svg" alt=""  />
              </span>
              <span class="logo-lg">
                
                <img src="./assets/images/krinikIn_Logo.svg" alt="" />
              </span>
            </a>
          </div>

          <button type="button" class="btn btn-sm px-3 font-size-24 header-item waves-effect " id="vertical-menu-btn">
            <i class="mdi mdi-backburger "></i>
          </button>

          <!-- App Search-->
          <!-- <form class="app-search d-none d-lg-block">
                            <div class="position-relative mt-3">
                                <input type="text" class="form-control" placeholder="Search...">
                                <span class="mdi mdi-magnify"></span>
                            </div>
                        </form> -->
        </div>

        <div class="  d-flex justify-content-center gap-4 time_show1">
          <div class="dropdown d-flex justify-content-end ms-2  " id="enterotpdiv">
            <!-- <button id="showotppage" type="button" class="btn btn-primary2  waves-effect" 
             >Enter OTP
            </button> -->
            
          </div>
        
          <div class="dropdown   dblock">
            <div id="time_show" class="btn-primary2  px-3">
            </div>
          </div>

          
        </div>
        
      </div>
    </header>

     <!-- ========== Left Sidebar Start ========== -->
     <div class="vertical-menu ">
      <div data-simplebar class="h-100 ">
        <!--- Sidemenu -->
        <div id="sidebar-menu" class="">
          <!-- Left Menu Start -->
          <ul class="metismenu list-unstyled " id="side-menu">
            <li class="menu-title">Menu</li>

            <li>
              <a href="./dashboard.html" class="waves-effect">
                <div class=" icons-sm icon-set">
                  <span class="material-symbols-outlined icon-margin">
                    dashboard
                    </span>
               
                <span>Dashboard</span>
                </div>
              </a>
            </li>

            <li>
              <a href="./user.html" class="waves-effect">
                <div class="icons-sm icon-set">
                  <span class="material-symbols-outlined icon-margin">
                    person
                    </span>
               
                <span>User</span>
              </div>
              </a>
            </li>

            <li>
              <a href="javascript: void(0);" class=" ">
                <div class="icons-sm icon-set ">
                  <span class="material-symbols-outlined icon-margin">
                    sports_cricket
                    </span>                    
                    <span class="has-arrow waves-effect ">Sports Configuration</span>
                                    
                  </div> 
                  
                </a>

              <ul class="sub-menu" aria-expanded="false">
                <li><a href="./manage-league.html">Manage Leagues</a></li>
                <li><a href="./manage-team.html">Manage Teams</a></li>
                <li><a href="./manage-player.html">Manage Players</a></li>
              </ul>
            </li>
            
            <li>
              <a href="javascript: void(0);" class=" ">
                <div class="icons-sm icon-set ">
                  <span class="material-symbols-outlined icon-margin">
                    crossword
                    </span>                   
                    <span class="has-arrow has-arrow1 waves-effect ">Manage Contest</span>
                                    
                  </div> 
                  
                </a>

              <ul class="sub-menu" aria-expanded="false">
                <li><a href="./manage-match.html">Manage Match</a></li>
                <li><a href="./manage-pool.html">Manage Pools</a></li>
              </ul>
            </li>

            <li class="otp-exempt" style="display:none">
              <a href="javascript: void(0);" class=" ">
                <div class="icons-sm icon-set ">
                  <span class="material-symbols-outlined icon-margin">
                    receipt_long
                    </span>                 
                    <span class="has-arrow has-arrow2 waves-effect ">Transactions</span>
                                    
                  </div> 
                  
                </a>

              <ul class="sub-menu" aria-expanded="false">
                <li><a href="./all-transaction.html">All Transaction</a></li>
                <li><a href="./wallet-transaction.html">Wallet Transaction</a></li>
                <li><a href="./game-transaction.html">Game Transaction</a></li>
              </ul>
            </li>

            <li class="otp-exempt" style="display:none">
              <a href="./account-setting.html" class="waves-effect">
                <div class="icons-sm icon-set ">
                  <span class="material-symbols-outlined icon-margin">
                    settings
                    </span>
                    <span>Account Setting</span>
                </div>
              </a>
            </li>

            <li>
              <a href="" class="waves-effect " id="logoutButton">
                <div class=" icons-sm icon-set ">
                  <span class="material-symbols-outlined icon-margin ">
                    logout
                    </span>
                    <span class="">Logout</span>
                </div>
              </a>
            </li>

          
                    </ul>
        </div>
        <!-- Sidebar -->
      </div>
    </div>
    <!-- Left Sidebar End -->

    <!-- ============================================================== -->
    <!-- Start right Content here -->
    <!-- ============================================================== -->
    <div class="main-content">
      <div class="page-content">
        <!-- Page-Title -->
        <div class="page-title-box">
          <div class="container-fluid">
            <div class="row align-items-center">

              <div>
                <h4 class="page-title mb-1">Declare Result</h4>
              </div>
            </div>
          </div>
        </div>
        <div class="page-content-wrapper">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body">

                    <div class="row">

                      <div class="table-rep-plugin">
                        <div class="table-responsive mb-0 table table-scroll" data-pattern="priority-columns"
                          id="table-scrolling">
                          <table id="matchTable" class="table table-striped text-center align-items-center">
                            <thead class="align-items-center">
                              <tr>
                                <th data-priority="">No.</th>
                                <th data-priority="" class="sortable" data-column="team_name" colspan="2">All Players Name

                                </th>
                                <th data-priority="" colspan="2">
                                  Team Name
                                </th>
                                <th data-priority="">
                                  Run Enter
                                </th>
                              </tr>
                            </thead>
                            <tbody>
<!-- 
                              <tr>
                                <td>1</td>
                                <td> Rohit Sharma</td>
                                <td>INDIA</td>
                                <td class="responsive-td">
                                  <input type="text" placeholder="Enter Run" class="p-2 text-center">
                                </td>
                              </tr>

                              <tr>
                                <td>1</td>
                                <td> Rohit Sharma</td>
                                <td>INDIA</td>
                                <td class="responsive-td">
                                  <input type="text" placeholder="Enter Run" class="p-2  text-center">
                                </td>
                              </tr>
                              <tr>
                                <td>1</td>
                                <td> Rohit Sharma</td>
                                <td>INDIA</td>
                                <td class="responsive-td">
                                  <input type="text" placeholder="Enter Run" class="p-2 text-center">
                                </td>
                              </tr>
                              <tr>
                                <td>1</td>
                                <td> Rohit Sharma</td>
                                <td>INDIA</td>
                                <td class="responsive-td">
                                  <input type="text" placeholder="Enter Run" class="p-2 text-center">
                                </td>
                              </tr> -->





                          </table>

                        </div>
                        <div id="noDataFound" style="display:none;" class="no-data-div">
                          <img src="./assets/images/no-data.jpg" alt="No Data Found">
                        </div>
                      </div>

                    </div>
                    <div class="row pagi align-items-baseline" id="pagination" style="display:none">
                      <div class="col-sm-12 col-md-5">
                        <div class="dataTables_info" id="datatable_info" role="status" aria-live="polite">
                          Showing 1 to 10 of 57 leagues
                        </div>
                      </div>
                      <div class="col-sm-12 col-md-7">
                        <div class="dataTables_paginate paging_simple_numbers pagination index_buttons justify-content-end"
                          id="datatable_paginate">
                          <ul class="pagination-list d-flex list-unstyled"></ul>
                        </div>
                      </div>
                    </div>
                    <div class="row  ">
                      <div class="col-lg-12 d-flex justify-content-center">
                        <div class="mt-4">
                          <button class="btn btn-primary px-4 py-2" type="submit">Submit</button>
                        </div>
                      </div>
                    </div>
                    <!-- </div> -->
                  </div>
                </div>
              </div>
              <!-- end col -->
            </div>
            <!-- end row -->
          </div>

        </div>
        <!-- end row -->
      </div>
      <!-- container-fluid -->
    </div>
    <!-- end page-content-wrapper -->
  </div>
  <!-- End Page-content -->

  <footer class="footer">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-6">2020 © Xoric.</div>
        <div class="col-sm-6">
          <div class="text-sm-end d-none d-sm-block">
            Crafted with <i class="mdi mdi-heart text-danger"></i> by
            Themesdesign
          </div>
        </div>
      </div>
    </div>
  </footer>
  </div>
  <!-- end main content-->
  </div>
  <!-- END layout-wrapper -->

  

  <!-- JAVASCRIPT -->
  <script src="./assets/libs/jquery/jquery.min.js"></script>
  <script src="./assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="./assets/libs/metismenu/metisMenu.min.js"></script>
  <script src="./assets/libs/simplebar/simplebar.min.js"></script>
  <script src="./assets/libs/node-waves/waves.min.js"></script>

  <script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>

  <!-- Required datatable js -->
  <script src="./assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
  <script src="./assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
  <!-- Buttons examples -->
  <script src="./assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
  <script src="./assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
  <script src="./assets/libs/jszip/jszip.min.js"></script>
  <!-- <script src="./assets/libs/pdfmake/build/pdfmake.min.js"></script> -->
  <!-- <script src="./assets/libs/pdfmake/build/vfs_fonts.js"></script> -->
  <script src="./assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
  <script src="./assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
  <script src="./assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>
  <!-- Responsive examples -->
  <script src="./assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
  <script src="./assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

  <!-- datepicker -->
  <script src="./assets/libs/air-datepicker/air-datepicker.js"></script>
  <script src="./assets/libs/air-datepicker/air-datepicker.js"></script>

  <!-- apexcharts -->
  <!-- <script src="./assets/libs/apexcharts/apexcharts.min.js"></script> -->

  <script src="./assets/libs/jquery-knob/jquery.knob.min.js"></script>

  <!-- Jq vector map -->
  <!-- <script src="./assets/libs/jqvmap/jquery.vmap.min.js"></script> -->
  <!-- <script src="./assets/libs/jqvmap/maps/jquery.vmap.usa.js"></script> -->

  <script src="./assets/js/pages/dashboard.init.js"></script>

  <script src="./assets/js/app.js"></script>

<script>
  
var rankList = [];
var array = [];
var array_length = 0;
var table_size = 10;
var start_index = 1;
var end_index = 0;
var current_index = 1;
var max_index = 0;
var otpApi 
var otpApi2 
let totaldataleague = document.querySelector("#total-league-data");
let otpAdd = document.querySelector("#add-new-btn");
const urlParams = new URLSearchParams(window.location.search);
let id = urlParams.get('id');
let NumberId = Number(id);
console.log(typeof NumberId, NumberId, "NumberId");
let teamData

async function fetchData(NumberId) {
  try {
    const data = await $.ajax({
      url: `https://krinik.pythonanywhere.com/match_get/`,
      method: "GET"
    });
    const data1 = await $.ajax({
      url: `https://krinik.pythonanywhere.com/team_get/`,
      method: "GET"
    });

 teamData = data1.data

    if (data && data.status === "success") {
      console.log(data.data);
      console.log(NumberId, "fit");

      // Log all IDs in the response data
    
      // Compare the values directly
      let filtermatchview = data.data.find((p) => p.id === NumberId);
      let Players1 = filtermatchview.select_player_A
      let Players2 = filtermatchview.select_player_B

      let allPlayers = [...Players1,...Players2]
      console.log(allPlayers)


      if (filtermatchview) {
        rankList = allPlayers;
        console.log(rankList, "data");
        array = rankList;
        filterAndDisplay();
      } else {
        console.error("No match found for the given ID.");
      }
    } else {
      console.error("Error: Invalid data format");
    }
  } catch (error) {
    console.error("Error fetching data", error);
  }
}

// fetchData(NumberId);

// async function postPhoneNumber() {
// try {
// const response = await $.ajax({
//   url: "https://krinik.pythonanywhere.com/send_otp_get/", // Change this to your POST endpoint
//   method: "POST",
//   contentType: "application/json",
//   data: JSON.stringify({ phone_number: "7801804996"})
// });

// if (response ) {
//   console.log("Phone number posted successfully");
// } else {
//   console.error("Failed to post phone number", response);
// }
// } catch (error) {
// console.error("Error posting phone number:", error);
// }
// }

// async function phoneNumber() {
// try {
// const otpapi = await $.ajax({
//       url: "https://krinik.pythonanywhere.com//",
//       method: "GET"
//     });

 
//     if (otpapi && otpapi.status === "success") {
// // Access the first item in the data array
// let otpApi1 = otpapi.data[0];

// // Get the phone_number from the first item
//  otpApi = otpApi1.phone_number;
//  otpApi2 = otpApi1.otp
// console.log(otpApi);

//   console.log("Phone number posted successfully");
// } else {
//   console.error("Failed to post phone number", response);
// }
// } catch (error) {
// console.error("Error posting phone number:", error);
// }
// }

// console.log(otpApi)

function filterAndDisplay() {
  // filterRankList();
  preLoadCalculations();
  displayIndexButtons();
  displayTableRows();
  highlightIndexButton();
  
}

function preLoadCalculations(filteredArrayLength) {
  array_length = filteredArrayLength || array.length;
  max_index = Math.ceil(array_length / table_size);
}

// $(document).ready(function () {
//   const $dropdownBtn3 = $('#dropdownBtn3');
// const $dropdownContent3 = $('#dropdownContent3');
// const $selectedStatus = $('#selectedStatus');
// const $arrow = $('#arrowBar'); // Ensure this selector matches your HTML
// const $clearStatus = $('#clearStatus');

// function toggleDropdown() {
// const isExpanded = $dropdownContent3.toggleClass('show').hasClass('show');
// $dropdownBtn3.attr('aria-expanded', isExpanded);
// }

// // Click event for the selected status element to toggle the dropdown
// $selectedStatus.on('click', function() {
// toggleDropdown();
// });

// Click event for the arrow to toggle the dropdown
// $arrow.on('click', function() {
// toggleDropdown();
// });

// // Click event for selecting an item from the dropdown
// $dropdownContent3.on('click', 'a', function() {
// const selectedValue = $(this).data('value');
// $selectedStatus.text(selectedValue).data('value', selectedValue);
// $dropdownContent3.removeClass('show');

// if (selectedValue === 'All Status') {
//   $arrow.show();
//   $clearStatus.hide();
// } else {
//   $arrow.hide();
//   $clearStatus.show();
// }
// filterRankList(); // Filter based on the selected status
// });

// // Click event for clearing the selected status
// $clearStatus.on('click', function() {
// $selectedStatus.text('All Status').data('value', 'All Status');
// $arrow.show();
// $clearStatus.hide();
// $dropdownContent3.removeClass('show'); // Hide the dropdown content
// $dropdownBtn3.attr('aria-expanded', 'false'); // Ensure dropdown button is collapsed
// filterRankList(); // Filter with the reset status
// });

// // Click event for closing the dropdown if clicked outside
// $(document).on('click', function(event) {
// if (!$selectedStatus.is(event.target) && !$selectedStatus.has(event.target).length && !$dropdownContent3.has(event.target).length && !$arrow.is(event.target) && !$clearStatus.is(event.target)) {
//   $dropdownContent3.removeClass('show');
//   $dropdownBtn3.attr('aria-expanded', 'false');
// }
// });




  // $('#tab_filter_text').on('input', filterRankList);
  // let picker = flatpickr('#rangePicker', {
  //   mode: 'range',
  //   dateFormat: 'd-m-Y',
  //   onClose: function (selectedDates, dateStr, instance) {
  //     if (!selectedDates || selectedDates.length === 0) {
  //       instance.clear();
  //       $('#rangePicker').text('Start & End Date').removeClass('has-dates');
  //       $('#clearDates').hide();
  //       $('#calendarIcon').show();
  //     } else {
  //       $('#rangePicker').text(selectedDates.map(date => instance.formatDate(date, 'd-m-Y')).join(' - ')).addClass('has-dates');
  //       $('#clearDates').show();
  //       $('#calendarIcon').hide();
  //     }
  //     filterRankList();
  //   },
  //   clickOpens: false,
  //   allowInput: false
  // });

  // $('#rangePicker, #calendarIcon').click(function () {
  //   if (!$('#rangePicker').hasClass('has-dates')) {
  //     picker.open();
  //   }
  // });

  // $('#clearDates').click(function () {
  //   picker.clear();
  //   $('#rangePicker').text('Start & End Date').removeClass('has-dates');
  //   $('#clearDates').hide();
  //   $('#calendarIcon').show();
  //   filterRankList();
  // });

  // $('#statusDropdown').change(filterRankList);
//   fetchData();
// });

function filterRankList() {
    // var tab_filter_text = $("#tab_filter_text").val().toLowerCase().trim();
    // var datefilter = $('#rangePicker').text().trim();
    // const statusFilter = $("#selectedStatus").data('value') || '';
    // var startDate, endDate;

    // if (datefilter !== '' && datefilter !== 'Start & End Date') {
    //     var dates = datefilter.split(' - ');
    //     startDate = moment(dates[0], 'DD-MM-YYYY').toDate();
    //     console.log(startDate)
    //     endDate = moment(dates[1], 'DD-MM-YYYY').toDate();
    // }

    // var filteredArray = rankList.filter(function (object) {
    //     var matchesText = true, matchesStatus = true, matchesDate = true;

        // if (tab_filter_text !== '') {
        //     matchesText = (object.league_name && object.league_name.toLowerCase().includes(tab_filter_text)) ||
        //         (object.short_league_name && object.short_league_name.toLowerCase().includes(tab_filter_text)) ||
        //         (object.start_league_date && object.start_league_date.toLowerCase().includes(tab_filter_text)) ||
        //         (object.end_league_date && object.end_league_date.toLowerCase().includes(tab_filter_text));
        // }

        // if (statusFilter !== '') {
        //     const status = getStatus(object.start_league_date, object.end_league_date);
        //     matchesStatus = (status === statusFilter);
        // }
  //       if (statusFilter !== 'All Status') {
  //         const status = getStatus(object.start_league_date, object.end_league_date)
  //   console.log(status)
  //   matchesStatus = (status === statusFilter);
  //   // console.log(matchesStatus ,"okli")
  // }

    //     if (startDate && endDate) {
    //         matchesDate = (moment(object.start_league_date, 'DD-MM-YYYY').toDate() >= startDate &&
    //             moment(object.end_league_date, 'DD-MM-YYYY').toDate() <= endDate);
    //     }

    //     return matchesText && matchesStatus && matchesDate;
    // });

    array = filteredArray;
    preLoadCalculations();
    current_index = 1;
    displayIndexButtons();
    highlightIndexButton()
    displayTableRows();
}
// function getStatus(start_date, end_date) {
//   var currentDate = new Date();
//   var startDate = moment(start_date, "DD-MM-YYYY HH:mm:ss").toDate();
//   var endDate = moment(end_date, "DD-MM-YYYY HH:mm:ss").toDate();

//   if (startDate < currentDate && currentDate <= endDate) {
//     return "Running";
//   } else if (startDate < currentDate && endDate < currentDate) {
//     return "Completed";
//   } else if (startDate > currentDate && endDate > currentDate) {
//     return "Upcoming";
//   } else {
//     return "unknown";
//   }
// }


function displayIndexButtons() {
$(".index_buttons ul").empty();

if (array_length <= table_size) {
    // If there are 10 or fewer items, do not show pagination
    return;
}

if (current_index > 1) {
    $(".index_buttons ul").append('<li><button class="paginate_button page-item previous" onclick="prev()">Previous</button></li>');
}

const show_page = getElidedPageRange(current_index, max_index);

show_page.forEach(i => {
    if (i === current_index) {
        $(".index_buttons ul").append('<li><button class="paginate_button page-item active">' + i + '</button></li>');
    } else if (i === "...") {
        $(".index_buttons ul").append('<li><button class="paginate_button page-item">...</button></li>');
    } else {
        $(".index_buttons ul").append('<li><button class="paginate_button page-item" onclick="indexPagination(' + i + ')">' + i + '</button></li>');
    }
});

if (current_index < max_index) {
    $(".index_buttons ul").append('<li><button class="paginate_button page-item next" onclick="next()">Next</button></li>');
}

highlightIndexButton();
}


function getElidedPageRange(current, total) {
    const delta = 1;
    const range = [];
    const left = current - delta;
    const right = current + delta + 1;
    let last = 0;

    for (let i = 1; i <= total; i++) {
        if (i === 1 || i === total || (i >= left && i < right)) {
            if (last + 1 !== i) {
                range.push("...");
            }
            range.push(i);
            last = i;
        }
    }

    return range;
}

function highlightIndexButton() {
    start_index = (current_index - 1) * table_size + 1;
    end_index = Math.min(start_index + table_size - 1, array_length);
    $("#datatable_info").text("Showing " + start_index + " to " + end_index + " of " + array_length + " items");
    $(".index_buttons ul a").removeClass("active");
    $('.index_buttons ul a').each(function () {
        if ($(this).text() == current_index) {
            $(this).addClass("active");
        }
    });
    displayTableRows();
}
function prev() {
    if (current_index > 1) {
        current_index--;
        displayIndexButtons();
        highlightIndexButton();
    }
}

function next() {
    if (current_index < max_index) {
        current_index++;
        displayIndexButtons();
        highlightIndexButton();
    }
}

function indexPagination(index) {
    current_index = index;
    displayIndexButtons();
    highlightIndexButton();
}


// const adminType =  JSON.parse(localStorage.getItem('adminType'))
// const adminVal = adminType.value
// const statusType =  adminType.status



// function initializePage1() {
//   // HTML for mobile number section and OTP modal

//   const otpModalHTML = `

//   <div id="otpModal" class="modal" style="display:none;z-index:2000">
 
//       <div class="modal-content">
 
//           <span class="close">&times;</span>
//           <h2>OTP Verification</h2>
//            <div class="col-md-12 d-flex justify-content-between align-items-center">
//             <div class="form-group form-group-custom ">
//                 <input type="text" class="form-control" id="mobilenum" value="Mobile No. ${otpApi}" readonly style="text-align: center;" />
//             </div>

//             <div class=" text-center">
//                 <button class="btn btn-primary " id="get-otp-btn">
//                     Get OTP
//                 </button>
//             </div>
//         </div>
//          <div id="showotptimer" style="display:none;">
//           <div class="otp-inputs text-center">
//               <input type="text" maxlength="1" class="otp-input"/>
//               <input type="text" maxlength="1" class="otp-input"/>
//               <input type="text" maxlength="1" class="otp-input"/>
//               <input type="text" maxlength="1" class="otp-input"/>
//               <input type="text" maxlength="1" class="otp-input"/>
//               <input type="text" maxlength="1" class="otp-input"/>
//           </div>
//           <p class="resend-timer text-end">Resend in <span id="timer">30</span> sec</p>
//           <button id="submitOTP" class="btn btn-primary">Submit</button>
//           <p id="otpError" style="color:red;display:none;">Invalid OTP. Please try again.</p>
//       </div>
//   </div>
//   <div id="otpOverlay" class="overlay" style="display:none;"></div>
// `;

// document.body.insertAdjacentHTML('beforeend', otpModalHTML);

//   // Get elements for OTP modal
//   const otpModal = document.getElementById("otpModal");
//   const otpOverlay = document.getElementById("otpOverlay");
//   const closeModal = otpModal.querySelector(".close");
//   const submitOTP = document.getElementById("submitOTP");
//   const otpError = document.getElementById("otpError");
//   const timerElement = document.getElementById('timer');
//   const timerElement1 = document.getElementById('showotptimer');


//   function showOTPModal() {
//       otpModal.style.display = "block";
//       otpOverlay.style.display = "block";
//       startTimer();
//   }
//   function showOTPModal1() {
//     timerElement1.style.display = "block";
//     otpOverlay.style.display = "block";

// }

//   function hideOTPModal() {
//       otpModal.style.display = "none";
//       otpOverlay.style.display = "none";
//   }
// console.log(String(otpApi2))
//   function validateOTP(otp) {
//     let otpsend = String(otpApi2) 

//      if(otp === otpsend){

//        return otp // Example OTP validation
//      }else{
//       otpError.style.display = "block";
//      }
//   }

//   function startTimer() {
//       let time = 30; // Timer duration in seconds

//       const interval = setInterval(() => {
//           time--;
//           timerElement.textContent = time;
//           if (time <= 0) {
//               clearInterval(interval);
//               timerElement.textContent = '0';
//               // Enable resend functionality here if needed
//           }
//       }, 1000);
//   }

//   submitOTP.addEventListener("click", () => {
//       const otpInputs = document.querySelectorAll('.otp-input');
//       const otp = Array.from(otpInputs).map(input => input.value).join('');
//       console.log(otp)
//       if (validateOTP(otp)) {
//         const adminType = JSON.parse(localStorage.getItem('adminType'));
//         const userType = JSON.parse(localStorage.getItem('userEmail'));

//         const currentTime = new Date().getTime();
//             const COOKIE_EXPIRATION_HOURS_SUPER_ADMIN = 1; // 60 minutes
//             userType.expirationTime = currentTime + (COOKIE_EXPIRATION_HOURS_SUPER_ADMIN * 60 * 60 * 1000); // Update expiration time
//             localStorage.setItem('userEmail', JSON.stringify(userType));
//         // Check if the adminType exists and update its status
//         if (adminType) {
//             adminType.status = "false"; // Update the status as needed

        
//             // Save the updated adminType back to localStorage
//             localStorage.setItem('adminType', JSON.stringify(adminType));
//         }
    
//         hideOTPModal();
    
//     location.reload();

//         // displayTableRows();
//           // Allow action after successful OTP verification
//       } else {
//           otpError.style.display = "block";
//       }
//   });

//   closeModal.addEventListener("click", hideOTPModal);
//   otpOverlay.addEventListener("click", hideOTPModal);

//   // Add event listener to the 'Get OTP' button
//   const getOtpButton = document.getElementById('get-otp-btn');
//   getOtpButton.addEventListener('click', function () {
//       showOTPModal1();
//   });
//   // const elements = document.querySelectorAll("button, input, select, textarea, a,li,div,th,td,span,i");
//   // Add event listeners to elements with the class 'otp-exempt3'
//   // const elements1 = document.querySelectorAll(".otp-exempt3");

//   const elements = document.querySelectorAll("button, input, select, textarea, a, li, div, th, td, span, i");
//   elements.forEach(element => {
//       element.addEventListener("click", (event) => {
//           if (element.classList.contains("otp-exempt3")) {
//               event.preventDefault();
       
//                   showOTPModal();

//           }
//       });
//     })
// }


// function initializePage1() {
// // HTML for mobile number section and OTP modal
// const otpModalHTML = `
// <div id="otpModal" class="modal" style="display:none;z-index:2000">
//     <div class="modal-content">
//         <span class="close">&times;</span>
//         <h2>OTP Verification</h2>
//         <div class="col-md-12 d-flex justify-content-between align-items-center">
//             <div class="form-group form-group-custom">
//                 <input type="text" class="form-control" id="mobilenum" value="Mobile No. 7801804996" readonly style="text-align: center;" />
//             </div>
//             <div class="text-center">
//                 <button class="btn btn-primary" id="get-otp-btn">Get OTP</button>
//             </div>
//         </div>
//         <div id="showotptimer" style="display:none;">
//             <div class="otp-inputs text-center">
//                 <input type="text" maxlength="1" class="otp-input" />
//                 <input type="text" maxlength="1" class="otp-input" />
//                 <input type="text" maxlength="1" class="otp-input" />
//                 <input type="text" maxlength="1" class="otp-input" />
//                 <input type="text" maxlength="1" class="otp-input" />
//                 <input type="text" maxlength="1" class="otp-input" />
//             </div>
//             <p class="resend-timer text-end">
//                 Resend in <span id="timer">30</span> sec
//                 <button id="resend-otp-btn" style="display:none;">Resend OTP</button>
//             </p>
//             <button id="submitOTP" class="btn btn-primary">Submit</button>
//             <p id="otpError" style="color:red;display:none;">Invalid OTP. Please try again.</p>
//         </div>
//     </div>
//     <div id="otpOverlay" class="overlay" style="display:none;"></div>
// </div>`;

// document.body.insertAdjacentHTML('beforeend', otpModalHTML);

// // Get elements for OTP modal
// const otpModal = document.getElementById("otpModal");
// const otpOverlay = document.getElementById("otpOverlay");
// const closeModal = otpModal.querySelector(".close");
// const submitOTP = document.getElementById("submitOTP");
// const otpError = document.getElementById("otpError");
// const timerElement = document.getElementById('timer');
// const timerElement1 = document.getElementById('showotptimer');
// const resendOtpButton = document.getElementById('resend-otp-btn');

// function showOTPModal() {
//   otpModal.style.display = "block";
//   otpOverlay.style.display = "block";
//   startTimer();

// }
// function showOTPModal1() {
// timerElement1.style.display = "block";
// otpOverlay.style.display = "block";

// }

// function hideOTPModal() {
//     otpModal.style.display = "none";
//     otpOverlay.style.display = "none";
//     resetTimer(); // Reset the timer when hiding the modal
// }

// function validateOTP(otp) {
//     let otpsend = String(otpApi2); // Ensure otpApi2 is a string
// console.log( otpsend)
//     if (otp === otpsend) {
//         otpError.style.display = "none"; // Hide error if OTP is valid
//         return true;
//     } else {
//         otpError.style.display = "block"; // Show error if OTP is invalid
//         return false;
//     }
// }

// let timerIntervalId = null;

// function startTimer() {
//     let time = 30; // Timer duration in seconds

//     if (timerIntervalId !== null) {
//         clearInterval(timerIntervalId);
//     }

//     timerIntervalId = setInterval(() => {
//         time--;
//         timerElement.textContent = time;
//         if (time <= 0) {
//             clearInterval(timerIntervalId);
//             timerElement.textContent = '0';
//             resendOtpButton.style.display = 'inline-block'; // Show the resend button
//         }
//     }, 1000);
// }

// function resetTimer() {
//     if (timerIntervalId !== null) {
//         clearInterval(timerIntervalId);
//         timerIntervalId = null;
//     }
//     timerElement.textContent = '30'; // Reset the timer display
//     resendOtpButton.style.display = 'none'; // Hide the resend button
// }

// submitOTP.addEventListener("click", () => {
//     const otpInputs = document.querySelectorAll('.otp-input');
//     const otp = Array.from(otpInputs).map(input => input.value).join('');
//     console.log( otp)
//     if (validateOTP(otp)) {
//         const adminType = JSON.parse(localStorage.getItem('adminType'));
//         const userType = JSON.parse(localStorage.getItem('userEmail'));

//         const currentTime = new Date().getTime();
//         const COOKIE_EXPIRATION_HOURS = adminType === 'super_admin' ? 1 : 0.5; // 60 or 30 minutes based on admin type
//         const expirationTime = new Date(currentTime + COOKIE_EXPIRATION_HOURS * 60 * 60 * 1000);

//         localStorage.setItem('loginTime', expirationTime.toISOString());
//         hideOTPModal(); // Hide the OTP modal upon successful validation
//     }
// });

// closeModal.addEventListener("click", hideOTPModal);
// otpOverlay.addEventListener("click", hideOTPModal);
// // resendOtpButton.addEventListener("click",)
// // Close modal if clicking outside the modal content
// resendOtpButton.addEventListener("click", (event) => {
//   postPhoneNumber()
//   // phoneNumber()
//     if (event.target === resendOtpButton) {
//       resendOtpButton.style.display = "none"
//     }
// });
// const getOtpButton = document.getElementById('get-otp-btn');
// getOtpButton.addEventListener('click', function () {
//   showOTPModal1();
//   postPhoneNumber()
//   // phoneNumber()
// });
// const elements = document.querySelectorAll("button, input, select, textarea, a, li, div, th, td, span, i");
// elements.forEach(element => {
//     element.addEventListener("click", (event) => {
//         if (element.classList.contains("otp-exempt3")) {
//             event.preventDefault();
         
//                 showOTPModal();

//         }
//     });
//   })
// }


// if( statusType == "true"){
// otpAdd.classList.add('otp-exempt3')
// }else{
// otpAdd.classList.remove('otp-exempt3')

// }

function displayTableRows() {
  $("table tbody").empty();
  var tab_start = start_index - 1;
  var tab_end = end_index;

  if (array.length === 0) {
    $("#noDataFound").show();
    $("#pagination").hide();
    $("#table-scrolling").css("overflow-x", "hidden");
    return;
  } else {
    $("#noDataFound").hide();
    $("#pagination").show();
    $("#table-scrolling").css("overflow-x", "auto");
  }

  // Loop through the array for the specified range
  for (var i = tab_start; i < tab_end && i < array.length; i++) {
    var showdata = array[i];
    var showteam = teamData.filter((p) => p.id == showdata.team_name);
    
    // Ensure showteam is not empty
    var teamName = showteam.length > 0 ? showteam[0].team_name : "";

    var tr = $("<tr></tr>");
    var noCell = $("<td></td>").text(i + 1);
    var fullNameCell = $("<td colspan='2'></td>").text(showdata["player_name"] || "");
    var shortNameCell = $("<td colspan='2'></td>").text(teamName || "");
    
    // Use .html() to properly render the input element
    var enterRun = $("<td class='responsive-td'></td>").html("<input type='text' placeholder='Enter Run' class='p-2 text-center'>");

    tr.append(noCell)
      .append(fullNameCell)
      .append(shortNameCell)
      .append(enterRun);

    $("table tbody").append(tr);
  }
}


// Function to post run data and redirect
function postRunData() {
  var dataToPost = [];

  // Loop through all the rows in the table
  $("table tbody tr").each(function() {
    var playerId = $(this).find(".run-input").data("player-id");
    var runValue = $(this).find(".run-input").val();
    runValue = runValue ? runValue : 0;

    var playerName = $(this).find("td:eq(1)").text(); // Full name
    var teamName = $(this).find("td:eq(2)").text(); // Team name

    var playerData = {
      player_id: playerId,
      player_declare: playerName,
      team_declare: teamName,
      total_run: runValue
    };

    dataToPost.push(playerData);
  });

  // Perform an AJAX POST request to the API with the collected data
  $.ajax({
    url: 'YOUR_API_ENDPOINT', // Replace with your API endpoint
    type: 'POST',
    contentType: 'application/json',
    data: JSON.stringify(dataToPost),
    success: function(response) {
      console.log("Data posted successfully", response);
      alert("Run data submitted successfully!");

      // Redirect to match-name.html
      window.location.href = "match-name.html";
    },
    error: function(error) {
      console.error("Error posting data", error);
      alert("Failed to submit run data.");
    }
  });
}

// Set up the click event handler for the submit button
$(document).ready(function() {
  $("#submitButton").on("click", function() {
    postRunData(); // Call the function to post data
  });
});


// async function handleDelete(id) {
//   if( statusType == "true"){      

// initializePage1()

// }else{
//   if (confirm('Are you sure you want to delete this league?')) {
//     const url = `https://krinik.pythonanywhere.com/league_get/${id}/`;
//     try {
//       const response = await fetch(url, { method: "DELETE" });

//       if (response.ok) {
//         await fetchData();
//       } else {
//         console.error("Failed to delete the league");
//       }
//     } catch (error) {
//       console.error("Error deleting data:", error);
//     }
//   }
// }
// }
// function viewLeagueDetails(leagueName) {
//   if( statusType == "true"){      

// initializePage1()

// }else{
// // Encode league name for URL
// var encodedLeagueName = encodeURIComponent(leagueName);
// // Redirect to view league details page with league name as query parameter
// window.location.href = 'view-league-details.html?leagueName=' + encodedLeagueName;
// }
// }


// console.log(statusType,"sh")
// async function handleEdit(id) {

  

//   if( statusType == "true"){      

//       initializePage1()
    
//   }else{
//     const url = `https://krinik.pythonanywhere.com/league_get/${id}/`;
//   try {
//     const response = await fetch(url);

//     if (response.ok) {
//       window.location.href = `editleague.html?id=${id}`;
//     } else {
//       console.error("Failed to fetch the league data");
//     }
//   } catch (error) {
//     console.error("Error fetching data:", error);
//   }
//   }

 
// }


// const table = document.getElementById('tech-companies-1');
// const downloadBtn = document.getElementById('download-btn');

// downloadBtn.addEventListener('click', () => {
// const workbook = XLSX.utils.table_to_book(table, { sheet: 'League Data' });
// const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
// const data = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
// const url = URL.createObjectURL(data);
// const a = document.createElement('a');
// a.href = url;
// a.download = 'league_data.xlsx';
// a.click();

// URL.revokeObjectURL(url);
// a.remove();
// });

fetchData(NumberId);

</script>



</body>

</html>