<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Pool C</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Themesdesign" name="author" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <!-- App favicon -->
    <!-- <link rel="shortcut icon" href="./assets/images/favicon.ico" /> -->
    <link rel="icon" href="./assets/images/krinikIn_Logo.svg" type="image/x-icon" >
    <!-- DataTables -->
    <link href="./assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />
    <link href="./assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


    <!-- Responsive datatable examples -->
    <link href="./assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- datepicker -->
    <link href="./assets/libs/air-datepicker/air-datepicker.css" rel="stylesheet" />

    <!-- jvectormap -->
    <!-- <link href="./assets/libs/jqvmap/jqvmap.min.css" rel="stylesheet" /> -->

    <!-- Bootstrap Css -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="./assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="./assets/css/app.css" rel="stylesheet" type="text/css" />
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,300,0,0" />

    <style>
        .select-box-wrapper {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .select-wrapper {
            position: relative;
        }

        .select-wrapper select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 30px;
        }

        .select-wrapper .select-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #555;
        }

        .mainnn {

            margin-top: 70px !important;
        }

        input {
            text-align: center;

        }

        .page-content-wrapper {
            background-color: white;
            padding-bottom: 35px;
        }
    </style>
</head>

<body data-topbar="colored">
    <!-- Begin page -->
    <div id="layout-wrapper">
      <header id="page-topbar" class="">
        <div class="navbar-header ">
          <div class="d-flex ">
            <!-- LOGO -->
            <div class="navbar-brand-box">
              <a href="./dashboard.html" class="logo logo-dark">
                <span class="logo-sm">
                  
                  <img src="./assets/images/krinikIn_Logo.svg" alt="" />
                </span>
                <span class="logo-lg">
                
                  <img src="./assets/images/krinikIn_Logo.svg" alt=""  />
                </span>
              </a>
  
              <a href="index.html" class="logo logo-light ">
                <span class="logo-sm">
               
                  <img src="./assets/images/krinikIn_Logo.svg" alt=""  />
                </span>
                <span class="logo-lg">
                  
                  <img src="./assets/images/krinikIn_Logo.svg" alt="" />
                </span>
              </a>
            </div>
  
            <button type="button" class="btn btn-sm px-3 font-size-24 header-item waves-effect " id="vertical-menu-btn">
              <i class="mdi mdi-backburger "></i>
            </button>
  
            <!-- App Search-->
            <!-- <form class="app-search d-none d-lg-block">
                              <div class="position-relative mt-3">
                                  <input type="text" class="form-control" placeholder="Search...">
                                  <span class="mdi mdi-magnify"></span>
                              </div>
                          </form> -->
          </div>
  
          <div class="  d-flex justify-content-center gap-4 time_show1">
            <div class="dropdown d-flex justify-content-end ms-2  " id="enterotpdiv">
              <!-- <button id="showotppage" type="button" class="btn btn-primary2  waves-effect" 
               >Enter OTP
              </button> -->
              
            </div>
          
            <div class="dropdown   dblock">
              <div id="time_show" class="btn-primary2  px-3">
              </div>
            </div>
  
            
          </div>
          
        </div>
      </header>
  
        <!-- ========== Left Sidebar Start ========== -->
        <div class="vertical-menu ">
            <div data-simplebar class="h-100 ">
              <!--- Sidemenu -->
              <div id="sidebar-menu" class="">
                <!-- Left Menu Start -->
                <ul class="metismenu list-unstyled " id="side-menu">
                  <li class="menu-title">Menu</li>
      
                  <li>
                    <a href="./dashboard.html" class="waves-effect">
                      <div class=" icons-sm icon-set">
                        <span class="material-symbols-outlined icon-margin">
                          dashboard
                          </span>
                     
                      <span>Dashboard</span>
                      </div>
                    </a>
                  </li>
      
                  <li>
                    <a href="./user.html" class="waves-effect">
                      <div class="icons-sm icon-set">
                        <span class="material-symbols-outlined icon-margin">
                          person
                          </span>
                     
                      <span>User</span>
                    </div>
                    </a>
                  </li>
      
                  <li>
                    <a href="javascript: void(0);" class=" ">
                      <div class="icons-sm icon-set ">
                        <span class="material-symbols-outlined icon-margin">
                          sports_cricket
                          </span>                    
                          <span class="has-arrow waves-effect ">Sports Configuration</span>
                                          
                        </div> 
                        
                      </a>
      
                    <ul class="sub-menu" aria-expanded="false">
                      <li><a href="./manage-league.html">Manage Leagues</a></li>
                      <li><a href="./manage-team.html">Manage Teams</a></li>
                      <li><a href="./manage-player.html">Manage Players</a></li>
                    </ul>
                  </li>
                  
                  <li>
                    <a href="javascript: void(0);" class=" ">
                      <div class="icons-sm icon-set ">
                        <span class="material-symbols-outlined icon-margin">
                          crossword
                          </span>                   
                          <span class="has-arrow has-arrow1 waves-effect ">Manage Contest</span>
                                          
                        </div> 
                        
                      </a>
      
                    <ul class="sub-menu" aria-expanded="false">
                      <li><a href="./manage-match.html">Manage Match</a></li>
                      <li><a href="./manage-pool.html">Manage Pools</a></li>
                    </ul>
                  </li>
      
                  <li class="otp-exempt" style="display:none">
                    <a href="javascript: void(0);" class=" ">
                      <div class="icons-sm icon-set ">
                        <span class="material-symbols-outlined icon-margin">
                          receipt_long
                          </span>                 
                          <span class="has-arrow has-arrow2 waves-effect ">Transactions</span>
                                          
                        </div> 
                        
                      </a>
      
                    <ul class="sub-menu" aria-expanded="false">
                      <li><a href="./all-transaction.html">All Transaction</a></li>
                      <li><a href="./wallet-transaction.html">Wallet Transaction</a></li>
                      <li><a href="./game-transaction.html">Game Transaction</a></li>
                    </ul>
                  </li>
      
                  <li class="otp-exempt" style="display:none">
                    <a href="./account-setting.html" class="waves-effect">
                      <div class="icons-sm icon-set ">
                        <span class="material-symbols-outlined icon-margin">
                          settings
                          </span>
                          <span>Account Setting</span>
                      </div>
                    </a>
                  </li>
      
                  <li>
                    <a href="" class="waves-effect " id="logoutButton">
                      <div class=" icons-sm icon-set ">
                        <span class="material-symbols-outlined icon-margin ">
                          logout
                          </span>
                          <span class="">Logout</span>
                      </div>
                    </a>
                  </li>
      
                
                          </ul>
              </div>
              <!-- Sidebar -->
            </div>
          </div>
          <!-- Left Sidebar End -->

    <div class="main-content">
        <div class="page-content">
            <div class="page-title-box">
                <div class="container-fluid">
                    <div class="row align-items-center">
                        <div>
                            <h4 class="page-title mb-1" id="matchHeading">Create Triplets</h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row justify-content-center">
                        <div class="container-fluid">
                            <div class="row d-flex justify-content-center">
                                <div class="col-lg-8 col-sm-12">
                                    <div class="card-body mt-4">
                                        <h5 class="text-center">Select Triplets</h5>
                                        <div class="row d-flex justify-content-center mt-4" id="tripletsInputContainer">
                                            <!-- Triplets will be dynamically added here -->
                                        </div>
                                        <button class="btn btn-primary" id="addTripletButton">Add Triplet</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-5 text-center d-flex justify-content-center gap-3">
                          <button class="btn btn-primary grey-btn" type="button" id="cancel-btn"
                          onclick="window.location.replace('./manage-pool.html')">Skip</button>
                            <button class="btn btn-primary" type="submit" id="submitTripletsButton">Submit
                                Triplets</button>
                        </div>
                        <div id="createdTripletsContainer" class="mt-3">
                            <!-- Created triplets will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>






</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<script src="./assets/js/logout.js"></script>

<!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
        const playerTripletsContainer = document.getElementById('createdTripletsContainer');
        const submitTripletsButton = document.getElementById('submitTripletsButton');
        const tripletsInputContainer = document.getElementById('tripletsInputContainer');
        const addTripletButton = document.getElementById('addTripletButton');
        const matchHeading = document.getElementById('matchHeading');
        const urlParams = new URLSearchParams(window.location.search);
        const matchName = urlParams.get('match');
        const poolName = urlParams.get('pool_name');

        let allPlayers = [];
        let createdTriplets = [];


        fetch('https://krinik.pythonanywhere.com/match_get/')
            .then(response => response.json())
            .then(data => {
                const matchData = data.data;
                const selectedMatch = matchData.find(match => match.match_display_name.includes(matchName));

                if (selectedMatch) {
                    const teamAName = selectedMatch.select_team_A.team_name;
                    const teamBName = selectedMatch.select_team_B.team_name;
                    matchHeading.textContent = `${teamAName} vs ${teamBName}`;

                    let allPlayers = [
                        ...selectedMatch.select_player_A.map(player => player.player_name),
                        ...selectedMatch.select_player_B.map(player => player.player_name)
                    ];

                    createPlayerTripletDropdowns(allPlayers);



                    addTripletButton.addEventListener('click', function () {
                        createPlayerTripletDropdowns(allPlayers);
                    });

                    function createPlayerTripletDropdowns(players) {
                        const inputGroup = document.createElement('div');
                        inputGroup.className = 'input-group mb-3';

                        const selectA = createPlayerDropdown(players);
                        const selectB = createPlayerDropdown(players);
                        const selectC = createPlayerDropdown(players);

                        const limitInput = document.createElement('input');
                        limitInput.type = 'text';
                        limitInput.className = 'form-control';
                        limitInput.placeholder = 'Limit';

                        selectA.addEventListener('change', function () {
                            handleSelectionChange(selectA, selectB, selectC, limitInput);
                        });

                        selectB.addEventListener('change', function () {
                            handleSelectionChange(selectA, selectB, selectC, limitInput);
                        });

                        selectC.addEventListener('change', function () {
                            handleSelectionChange(selectA, selectB, selectC, limitInput);
                        });

                        limitInput.addEventListener('input', function () {
                            updateCreatedTriplets(selectA, selectB, selectC, limitInput);
                        });

                        inputGroup.appendChild(selectA);
                        inputGroup.appendChild(selectB);
                        inputGroup.appendChild(selectC);
                        inputGroup.appendChild(limitInput);
                        tripletsInputContainer.appendChild(inputGroup);
                    }

                    function createPlayerDropdown(players) {
                        const selectElement = document.createElement('select');
                        selectElement.className = 'form-control player-dropdown';
                        const defaultOption = document.createElement('option');
                        defaultOption.value = '';
                        defaultOption.textContent = 'Select Player';
                        selectElement.appendChild(defaultOption);


                        players.forEach(player => {
                            const option = document.createElement('option');
                            option.value = player;
                            option.textContent = player;
                            selectElement.appendChild(option);
                        });

                        return selectElement;
                    }





                    function handleSelectionChange(selectA, selectB, selectC, limitInput) {
                        const playerA = selectA.value;
                        const playerB = selectB.value;
                        const playerC = selectC.value;

                        if (playerA && playerB && playerC) {
                            if ([playerA, playerB, playerC].some((player, index, array) => array.indexOf(player) !== index)) {
                                alert('Players must be unique.');
                                selectA.value = '';
                                selectB.value = '';
                                selectC.value = '';
                            } else if (tripletExists(playerA, playerB, playerC)) {
                                alert('This triplet already exists.');
                                selectA.value = '';
                                selectB.value = '';
                                selectC.value = '';
                            } else {
                                // Clear the limit input and remove any existing triplet involving the same players
                                limitInput.value = '';
                                createdTriplets = createdTriplets.filter(triplet => !(triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) &&
                                    !(triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) &&
                                    !(triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) &&
                                    !(triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) &&
                                    !(triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) &&
                                    !(triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));
                                displayCreatedTriplets();
                            }
                        }
                    }

                    function updateCreatedTriplets(selectA, selectB, selectC, limitInput) {
                        const playerA = selectA.value;
                        const playerB = selectB.value;
                        const playerC = selectC.value;
                        const limit = limitInput.value;

                        if (playerA && playerB && playerC && limit) {
                            const existingTripletIndex = createdTriplets.findIndex(triplet => (triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) ||
                                (triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) ||
                                (triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) ||
                                (triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) ||
                                (triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) ||
                                (triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));

                            if (existingTripletIndex !== -1) {
                                createdTriplets[existingTripletIndex].player_1 = playerA;
                                createdTriplets[existingTripletIndex].player_2 = playerB;
                                createdTriplets[existingTripletIndex].player_3 = playerC;
                                createdTriplets[existingTripletIndex].limit = limit;
                                displayCreatedTriplets();
                            } else {
                                createdTriplets.push({
                                    player_1: playerA,
                                    player_2: playerB,
                                    player_3: playerC,
                                    limit: limit
                                });
                                displayCreatedTriplets();
                            }
                        }
                    }

                    function tripletExists(playerA, playerB, playerC) {
                        return createdTriplets.some(triplet => (triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) ||
                            (triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) ||
                            (triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) ||
                            (triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) ||
                            (triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) ||
                            (triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));
                    }

                    function displayCreatedTriplets() {
                        playerTripletsContainer.innerHTML = '';

                        createdTriplets.forEach((triplet, index) => {
                            const tripletElement = document.createElement('div');
                            tripletElement.className = 'triplet mb-3';

                            const tripletText = document.createElement('span');
                            tripletText.textContent = ` (${triplet.player_1}, ${triplet.player_2}, ${triplet.player_3}) - Limit ${triplet.limit}`;

                            const removeButton = document.createElement('button');
                            removeButton.className = 'btn btn-sm btn-danger ml-2';
                            removeButton.textContent = 'Remove';
                            removeButton.addEventListener('click', () => {
                                createdTriplets.splice(index, 1);
                                displayCreatedTriplets();
                            });

                            tripletElement.appendChild(tripletText);
                            tripletElement.appendChild(removeButton);
                            playerTripletsContainer.appendChild(tripletElement);
                        });
                    }

                    submitTripletsButton.addEventListener('click', function () {
                        if (createdTriplets.length === 0) {
                            alert('Please create at least one triplet before submitting.');
                            return;
                        }

                        console.log('Created triplets:', createdTriplets);

                        createdTriplets.forEach(triplet => {
                            const payload = {
                                pool_name: poolName,
                                select_match: matchName,
                                player_1: triplet.player_1,
                                player_2: triplet.player_2,
                                player_3: triplet.player_3,
                                limit: triplet.limit
                            };

                            console.log('Payload:', payload);

                            fetch('https://krinik.pythonanywhere.com/pair_captain_v_get/', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify(payload),
                            })
                                .then(response => {
                                    if (!response.ok) {
                                        console.error('Network response was not ok. Status:', response.status, 'Status Text:', response.statusText);
                                        throw new Error('Network response was not ok');
                                    }
                                    return response.json();
                                })
                                .then(data => {
                                    console.log('Success:', data);
                                })
                                .catch(error => {
                                    console.error('Error:', error);
                                });
                        });
                    });


                } else {
                    console.error('Selected match not found.');
                }
            })
            .catch(error => console.error('Error fetching match data:', error));
    });

</script> -->

<script>
    document.addEventListener('DOMContentLoaded', async function () {
    const playerTripletsContainer = document.getElementById('createdTripletsContainer');
    const submitTripletsButton = document.getElementById('submitTripletsButton');
    const tripletsInputContainer = document.getElementById('tripletsInputContainer');
    const addTripletButton = document.getElementById('addTripletButton');
    const matchHeading = document.getElementById('matchHeading');
    const urlParams = new URLSearchParams(window.location.search);
    const matchName = urlParams.get('match');
    const poolName = urlParams.get('pool_name');

    let allPlayers = [];
    let createdTriplets = [];

    try {
        const response = await fetch('https://krinik.pythonanywhere.com/match_get/');
        if (!response.ok) throw new Error('Network response was not ok');

        const data = await response.json();
        const matchData = data.data;
        const selectedMatch = matchData.find(match => match.match_display_name.includes(matchName));

        if (selectedMatch) {
            const teamAName = selectedMatch.select_team_A.team_name;
            const teamBName = selectedMatch.select_team_B.team_name;
            // matchHeading.textContent = `${teamAName} vs ${teamBName}`;

            allPlayers = [
                ...selectedMatch.select_player_A.map(player => player.player_name),
                ...selectedMatch.select_player_B.map(player => player.player_name)
            ];

            createPlayerTripletDropdowns(allPlayers);

            addTripletButton.addEventListener('click', function () {
                createPlayerTripletDropdowns(allPlayers);
            });

            function createPlayerTripletDropdowns(players) {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'input-group mb-3';

                const selectA = createPlayerDropdown(players);
                const selectB = createPlayerDropdown(players);
                const selectC = createPlayerDropdown(players);

                const limitInput = document.createElement('input');
                limitInput.type = 'text';
                limitInput.className = 'form-control';
                limitInput.placeholder = 'Limit';

                selectA.addEventListener('change', function () {
                    handleSelectionChange(selectA, selectB, selectC, limitInput);
                });

                selectB.addEventListener('change', function () {
                    handleSelectionChange(selectA, selectB, selectC, limitInput);
                });

                selectC.addEventListener('change', function () {
                    handleSelectionChange(selectA, selectB, selectC, limitInput);
                });

                limitInput.addEventListener('input', function () {
                    updateCreatedTriplets(selectA, selectB, selectC, limitInput);
                });

                inputGroup.appendChild(selectA);
                inputGroup.appendChild(selectB);
                inputGroup.appendChild(selectC);
                inputGroup.appendChild(limitInput);
                tripletsInputContainer.appendChild(inputGroup);
            }

            function createPlayerDropdown(players) {
                const selectElement = document.createElement('select');
                selectElement.className = 'form-control player-dropdown';
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = 'Select Player';
                selectElement.appendChild(defaultOption);

                players.forEach(player => {
                    const option = document.createElement('option');
                    option.value = player;
                    option.textContent = player;
                    selectElement.appendChild(option);
                });

                return selectElement;
            }

            function handleSelectionChange(selectA, selectB, selectC, limitInput) {
                const playerA = selectA.value;
                const playerB = selectB.value;
                const playerC = selectC.value;

                if (playerA && playerB && playerC) {
                    if ([playerA, playerB, playerC].some((player, index, array) => array.indexOf(player) !== index)) {
                        alert('Players must be unique.');
                        selectA.value = '';
                        selectB.value = '';
                        selectC.value = '';
                    } else if (tripletExists(playerA, playerB, playerC)) {
                        alert('This triplet already exists.');
                        selectA.value = '';
                        selectB.value = '';
                        selectC.value = '';
                    } else {
                        // Clear the limit input and remove any existing triplet involving the same players
                        limitInput.value = '';
                        createdTriplets = createdTriplets.filter(triplet => !(triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) &&
                            !(triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) &&
                            !(triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) &&
                            !(triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) &&
                            !(triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) &&
                            !(triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));
                        displayCreatedTriplets();
                    }
                }
            }

            function updateCreatedTriplets(selectA, selectB, selectC, limitInput) {
                const playerA = selectA.value;
                const playerB = selectB.value;
                const playerC = selectC.value;
                const limit = limitInput.value;

                if (playerA && playerB && playerC && limit) {
                    const existingTripletIndex = createdTriplets.findIndex(triplet => (triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) ||
                        (triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) ||
                        (triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) ||
                        (triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) ||
                        (triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) ||
                        (triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));

                    if (existingTripletIndex !== -1) {
                        createdTriplets[existingTripletIndex].player_1 = playerA;
                        createdTriplets[existingTripletIndex].player_2 = playerB;
                        createdTriplets[existingTripletIndex].player_3 = playerC;
                        createdTriplets[existingTripletIndex].limit = limit;
                        displayCreatedTriplets();
                    } else {
                        createdTriplets.push({
                            player_1: playerA,
                            player_2: playerB,
                            player_3: playerC,
                            limit: limit
                        });
                        displayCreatedTriplets();
                    }
                }
            }

            function tripletExists(playerA, playerB, playerC) {
                return createdTriplets.some(triplet => (triplet.player_1 === playerA && triplet.player_2 === playerB && triplet.player_3 === playerC) ||
                    (triplet.player_1 === playerA && triplet.player_2 === playerC && triplet.player_3 === playerB) ||
                    (triplet.player_1 === playerB && triplet.player_2 === playerA && triplet.player_3 === playerC) ||
                    (triplet.player_1 === playerB && triplet.player_2 === playerC && triplet.player_3 === playerA) ||
                    (triplet.player_1 === playerC && triplet.player_2 === playerA && triplet.player_3 === playerB) ||
                    (triplet.player_1 === playerC && triplet.player_2 === playerB && triplet.player_3 === playerA));
            }

            function displayCreatedTriplets() {
                playerTripletsContainer.innerHTML = '';

                createdTriplets.forEach((triplet, index) => {
                    const tripletElement = document.createElement('div');
                    tripletElement.className = 'triplet mb-3';

                    const tripletText = document.createElement('span');
                    tripletText.textContent = ` (${triplet.player_1}, ${triplet.player_2}, ${triplet.player_3}) - Limit ${triplet.limit}`;

                    const removeButton = document.createElement('button');
                    removeButton.className = 'btn btn-sm btn-danger ml-2';
                    removeButton.textContent = 'Remove';
                    removeButton.addEventListener('click', () => {
                        createdTriplets.splice(index, 1);
                        displayCreatedTriplets();
                    });

                    tripletElement.appendChild(tripletText);
                    tripletElement.appendChild(removeButton);
                    playerTripletsContainer.appendChild(tripletElement);
                });
            }

            submitTripletsButton.addEventListener('click', async function () {
                if (createdTriplets.length === 0) {
                    alert('Please create at least one triplet before submitting.');
                    return;
                }

                console.log('Created triplets:', createdTriplets);

                for (const triplet of createdTriplets) {
                    const payload = {
                        pool_name: poolName,
                        select_match: matchName,
                        player_1: triplet.player_1,
                        player_2: triplet.player_2,
                        player_3: triplet.player_3,
                        limit: triplet.limit
                    };

                    console.log('Payload:', payload);

                    try {
                        const response = await fetch('https://krinik.pythonanywhere.com/pair_captain_v_get/', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(payload),
                        });

                        if (!response.ok) {
                            console.error('Network response was not ok. Status:', response.status, 'Status Text:', response.statusText);
                            throw new Error('Network response was not ok');
                        }

                        const data = await response.json();
                        console.log('Success:', data);
                          window.location.href = "./manage-pool.html"
                    } catch (error) {
                        console.error('Error:', error);
                    }
                }
            });

        } else {
            console.error('Selected match not found.');
        }
    } catch (error) {
        console.error('Error fetching match data:', error);
    }
});

</script>

<script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
        <script src="assets/libs/metismenu/metisMenu.min.js"></script>
        <script src="assets/libs/simplebar/simplebar.min.js"></script>
        <script src="assets/libs/node-waves/waves.min.js"></script>

        <script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>


        <script src="assets/js/app.js"></script>

</html>